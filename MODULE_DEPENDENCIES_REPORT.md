# –û—Ç—á–µ—Ç –æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ–∑–¥–∞–Ω–∞ —à–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π –≤ core

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
- ‚úÖ –°–æ–∑–¥–∞–Ω `EventBus` –≤ `src/core/events/EventBus.ts`
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π –≤ `src/core/events/events.ts`
- ‚úÖ –í—Å–µ stores –ø—É–±–ª–∏–∫—É—é—Ç —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–∞–Ω–¥ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã

–í—Å–µ –º–æ–¥—É–ª–∏ —Ç–µ–ø–µ—Ä—å –æ–±—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ EventBus –∏–∑ core, –±–µ–∑ –ø—Ä—è–º—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤.

### 1. ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ú–æ–¥—É–ª—å `servers` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥—É–ª—è `voice`

**–ë—ã–ª–æ**: –ú–æ–¥—É–ª—å servers –Ω–∞–ø—Ä—è–º—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `voiceRoomStore` –∏–∑ voice.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**:
- ‚úÖ `ChannelPage.tsx` - –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è `VOICE_EVENTS.CHANNEL_CONNECTED/DISCONNECTED`
- ‚úÖ `MessageList.tsx` - –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞
- ‚úÖ `VoiceRoom.tsx` - –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ EventBus

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–æ–¥—É–ª—å servers –±–æ–ª—å—à–µ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∏—á–µ–≥–æ –∏–∑ voice

### 2. ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ú–æ–¥—É–ª—å `servers` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥—É–ª—è `messaging`

**–ë—ã–ª–æ**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ servers –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ `messageStore` –∏–∑ messaging.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**:
- ‚úÖ `MessageList.tsx` - –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è `MESSAGING_EVENTS.MESSAGES_LOADED`, `MESSAGE_CREATED`
- ‚úÖ `MessageItem.tsx` - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã `MESSAGING_COMMANDS.UPDATE_MESSAGE`, `DELETE_MESSAGE`
- ‚úÖ `MessageInput.tsx` - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã `MESSAGING_COMMANDS.SEND_MESSAGE`
- ‚úÖ `messageStore` –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–º–∞–Ω–¥—ã –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–æ–¥—É–ª—å servers –±–æ–ª—å—à–µ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∏—á–µ–≥–æ –∏–∑ messaging

### 3. ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ú–æ–¥—É–ª—å `servers` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥—É–ª—è `channels`

**–ë—ã–ª–æ**: –ú–æ–¥—É–ª—å servers –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `channelsStore` –∏–∑ channels.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**:
- ‚úÖ `ChannelsSettings.tsx` - –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è `CHANNELS_EVENTS.CHANNELS_LOADED`
- ‚úÖ `MessageList.tsx` - –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è `CHANNELS_EVENTS.CHANNEL_SELECTED`, `CHANNELS_LOADED`

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–æ–¥—É–ª—å servers –±–æ–ª—å—à–µ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∏—á–µ–≥–æ –∏–∑ channels

### 4. ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ú–æ–¥—É–ª—å `messaging` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥—É–ª—è `channels`

**–ë—ã–ª–æ**: –ú–æ–¥—É–ª—å messaging –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `channelsStore` –∏–∑ channels.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**:
- ‚úÖ `MessageList.tsx` - –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è `CHANNELS_EVENTS.CHANNEL_SELECTED`, `CHANNELS_LOADED`

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–æ–¥—É–ª—å messaging –±–æ–ª—å—à–µ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∏—á–µ–≥–æ –∏–∑ channels

### 5. ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ú–æ–¥—É–ª—å `messaging` –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥—É–ª—è `voice`

**–ë—ã–ª–æ**: –ú–æ–¥—É–ª—å messaging –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `roomStore` –∏–∑ voice.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ**:
- ‚úÖ `MessageList.tsx` - –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è `VOICE_EVENTS.CHANNEL_CONNECTED/DISCONNECTED`

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–æ–¥—É–ª—å messaging –±–æ–ª—å—à–µ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –Ω–∏—á–µ–≥–æ –∏–∑ voice

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

- **servers ‚Üí voice**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (0 —Ñ–∞–π–ª–æ–≤)
- **servers ‚Üí messaging**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (0 —Ñ–∞–π–ª–æ–≤)
- **servers ‚Üí channels**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (0 —Ñ–∞–π–ª–æ–≤)
- **messaging ‚Üí channels**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (0 —Ñ–∞–π–ª–æ–≤)
- **messaging ‚Üí voice**: ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (0 —Ñ–∞–π–ª–æ–≤)

**–í—Å–µ–≥–æ –Ω–∞—Ä—É—à–µ–Ω–∏–π**: ‚úÖ 0 —Ñ–∞–π–ª–æ–≤ (–≤—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ú–æ–¥—É–ª–∏ –º–æ–≥—É—Ç –∑–∞–≤–∏—Å–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ—Ç:
- `core` - –±–∞–∑–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –∏ stores
- `shared` - –æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `types` - –æ–±—â–∏–µ —Ç–∏–ø—ã

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

1. **‚úÖ –°–æ–∑–¥–∞–Ω–∞ —à–∏–Ω–∞ —Å–æ–±—ã—Ç–∏–π –≤ core**:
   - `EventBus` –≤ `src/core/events/EventBus.ts`
   - –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π –≤ `src/core/events/events.ts`
   - –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ `src/core/index.ts`

2. **‚úÖ Stores –ø—É–±–ª–∏–∫—É—é—Ç —Å–æ–±—ã—Ç–∏—è**:
   - `voiceRoomStore` –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è, —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
   - `channelsStore` –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏—è –≤—ã–±–æ—Ä–∞ –∫–∞–Ω–∞–ª–∞, –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞–Ω–∞–ª–æ–≤
   - `messageStore` –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–±—ã—Ç–∏—è —Å–æ–∑–¥–∞–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
   - `messageStore` –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–º–∞–Ω–¥—ã –æ—Ç –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π

3. **‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–æ–±—ã—Ç–∏—è**:
   - –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è —á–µ—Ä–µ–∑ `eventBus.on()`
   - –ö–æ–º–∞–Ω–¥—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `eventBus.emit()`
   - –ù–µ—Ç –ø—Ä—è–º—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ stores –∏–∑ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π

4. **‚úÖ –°–∏—Å—Ç–µ–º–∞ –∫–æ–º–∞–Ω–¥**:
   - `MESSAGING_COMMANDS` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥ –≤ messaging –º–æ–¥—É–ª—å
   - –ö–æ–º–∞–Ω–¥—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ `messageStore.setupCommandListeners()`

## üìã –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π

### Voice Events
- `VOICE_EVENTS.CHANNEL_CONNECTED` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≥–æ–ª–æ—Å–æ–≤–æ–º—É –∫–∞–Ω–∞–ª—É
- `VOICE_EVENTS.CHANNEL_DISCONNECTED` - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞
- `VOICE_EVENTS.PARTICIPANT_JOINED` - —É—á–∞—Å—Ç–Ω–∏–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è
- `VOICE_EVENTS.PARTICIPANT_LEFT` - —É—á–∞—Å—Ç–Ω–∏–∫ –ø–æ–∫–∏–Ω—É–ª
- `VOICE_EVENTS.PARTICIPANTS_UPDATED` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- `VOICE_EVENTS.LOCAL_SPEAKING_STATE_CHANGED` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### Channels Events
- `CHANNELS_EVENTS.CHANNEL_SELECTED` - –≤—ã–±–æ—Ä –∫–∞–Ω–∞–ª–∞
- `CHANNELS_EVENTS.CHANNELS_LOADED` - –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞–Ω–∞–ª–æ–≤

### Messaging Events
- `MESSAGING_EVENTS.MESSAGE_CREATED` - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `MESSAGING_EVENTS.MESSAGES_LOADED` - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- `MESSAGING_EVENTS.CHANNEL_CHANGED` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞

### Messaging Commands
- `MESSAGING_COMMANDS.SEND_MESSAGE` - –∫–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
- `MESSAGING_COMMANDS.UPDATE_MESSAGE` - –∫–æ–º–∞–Ω–¥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
- `MESSAGING_COMMANDS.DELETE_MESSAGE` - –∫–æ–º–∞–Ω–¥–∞ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è
